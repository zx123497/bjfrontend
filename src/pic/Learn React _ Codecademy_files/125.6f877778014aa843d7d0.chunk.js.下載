(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[125],{"96qd":function(t,e,n){"use strict";n.d(e,"a",(function(){return NotificationsList}));var a=n("ODXe"),i=n("DZdY"),o=n("yrBZ"),c=n("uQrA"),l=n("uz3z"),r=n("9m3B"),s=n("udU5"),u=n("630U"),d=n("q1tI"),b=n.n(d),f=n("7xvl"),m=n("z9go");const g={"location/DASHBOARD":"dashboard_v2","location/CATALOG":"catalog","location/COURSE":"course_landing_page","location/PATH":"path_landing_page","location/COURSE_CONTENT_ITEM":"le_course_content_item","location/PATH_CONTENT_ITEM":"le_path_content_item"},buildTrackNotificationClickHandler=t=>e=>{Object(m.b)("notification","clicked",{target:"notification_bell_cta",page_name:t&&g[t]||null,event_id:e.id,context:e.campaign,element:e.type}),Object(m.c)({target:"notification_bell_cta",page_name:t&&g[t],context:"topnav_bell",slug:e.campaign,element:e.type})},getSortedNotifications=(t,e)=>t.length?t.sort(byDateComparator).slice(0,e).map((t=>{var e,n;return{date:Object(f.a)(new Date(t.time)),id:t.id,iconSettings:{color:u.g["blue-900"]},link:t.href,text:t.description,unread:1===t.status,campaign:t.campaign_name,imageUrl:"url"===(null===(e=t.img)||void 0===e?void 0:e.type)?null===(n=t.img)||void 0===n?void 0:n.slug:"",type:t.type}})):[],byDateComparator=(t,e)=>new Date(e.time).getTime()-new Date(t.time).getTime();const _=Object(i.a)(o.a,{target:"e1ap6r091",label:"StyledScrollBox"})("");_.defaultProps={maxHeight:"520",overflow:"auto",tabIndex:-1};const p=Object(i.a)(o.a,{target:"e1ap6r090",label:"StyledShowMoreBox"})({name:"1urx3um",styles:"padding-bottom:1px"}),NotificationsList=({locationType:t,clearNotifications:e,notifications:n})=>{const i=Object(d.useState)(!1),f=Object(a.a)(i,2),O=f[0],E=f[1],h=O?[n.length,"Less"]:[3,"More"],j=Object(a.a)(h,2),x=j[0],A=j[1],v=n.length>0&&n.length<=x,handleShowMoreOrLess=()=>{O&&(t=>{Object(m.c)({target:"notification_show_more",page_name:t&&g[t],context:"topnav_bell"})})(t),E(!O)},clearAll=()=>{e(n.map((t=>t.id))),(t=>{Object(m.c)({target:"notification_clear_all",page_name:t&&g[t],context:"topnav_bell"})})(t)},clearOne=n=>{e([n.id]),((t,e)=>{Object(m.c)({target:"notification_clear",page_name:e&&g[e],slug:t.campaign,element:t.type,context:"topnav_bell"})})(n,t)};return b.a.createElement(u.a,{bg:"white",pt:32,pb:24,tabIndex:-1,role:"dialog","aria-label":`My notifications, ${n.length} notifications`},b.a.createElement(o.b,{alignItems:"center",flexDirection:"row",height:"40",justifyContent:"space-between",px:32,mb:16},b.a.createElement(c.a,{as:"h1",fontSize:22},"My Notifications"),v&&b.a.createElement(l.TextButton,{mode:"light",onClick:clearAll,"aria-label":`Clear all ${n.length} notifications`},"Clear All")),b.a.createElement(o.a,{px:32},b.a.createElement(r.a,{name:"checkerDense",height:"1px",display:"flex"})),b.a.createElement(_,null,b.a.createElement(o.a,{pb:16},b.a.createElement(s.a,{notifications:getSortedNotifications(n,x),onNotificationClick:buildTrackNotificationClickHandler(t),onDismiss:t=>clearOne(t)})),n.length<=3?null:b.a.createElement(p,{px:32},b.a.createElement(l.TextButton,{onClick:handleShowMoreOrLess,"data-testid":"Show "+A},"Show ",A))))}},QJz3:function(t,e,n){"use strict";n.d(e,"b",(function(){return useNotificationArea})),n.d(e,"c",(function(){return useNotificationInteractions})),n.d(e,"a",(function(){return useNotifications}));var a=n("q1tI"),i=n("/MKj"),o=n("G4qV"),c=n("GsXu"),l=n("tQXl");function useNotificationArea(t){const e=t.id,n=Object(a.useMemo)((()=>Object(l.a)(e)),[e]),c=Object(l.b)(n),r=Object(o.b)({notifications:n,unreadCount:c});return Object(i.useSelector)(r)}function useNotificationInteractions(){const t=Object(i.useDispatch)();return Object(a.useMemo)((()=>({notificationsDeleted:e=>t(Object(c.d)(e)),notificationsMarkedRead:e=>t(Object(c.e)(e))})),[t])}function useNotifications(t){!function useNotificationSubscribe(t){const e=Object(i.useDispatch)();return Object(a.useEffect)((()=>(e(Object(c.c)(t)),()=>{e(Object(c.b)(t.id))})),[e,t])}(t);return{data:useNotificationArea(t),actions:useNotificationInteractions()}}},gnd6:function(t,e,n){"use strict";n.d(e,"a",(function(){return NotificationsDropdown}));var a=n("ODXe"),i=n("yrBZ"),o=n("cdDR"),c=n("q1tI"),l=n.n(c),r=n("tFdb"),s=n("96qd"),u=n("Xxlx"),d=n("QJz3"),b=n("ixXQ");const NotificationsDropdown=t=>{const e=Object(d.a)(b.a.HEADER_AREA),n=e.data,f=e.actions,m=n.notifications,g=n.unreadCount,_=f.notificationsDeleted,p=t.locationType,O=Object(c.useRef)(null),E=Object(c.useState)(!1),h=Object(a.a)(E,2),j=h[0],x=h[1],A=l.a.createElement("div",{ref:O},l.a.createElement(i.b,{height:"40",alignItems:"center",justifyContent:"center"},l.a.createElement(u.a,{data:{context:"global_nav",target:"notification_bell"},disableTracking:!!j,"aria-label":"notifications","data-testid":"notification_bell"},l.a.createElement(r.a,{theme:t.theme,key:"notification-bell",unreadCount:g,onClick:()=>{x(!j)}}))));return l.a.createElement(l.a.Fragment,null,A,l.a.createElement(o.a,{align:"right",verticalOffset:1,outline:!0,isOpen:j,onRequestClose:()=>{x(!1)},targetRef:O},l.a.createElement(i.b,{bg:"white",width:360,textAlign:"left"},l.a.createElement(s.a,{locationType:p,notifications:m,clearNotifications:_}))))}},ixXQ:function(t,e,n){"use strict";let a;n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i})),function(t){t.streaks="streaks",t.achievements="achievements"}(a||(a={}));const i={HEADER_AREA:{id:"bell",types:[],showRead:!0},TOAST_AREA:{id:"toast",types:[a.achievements,a.streaks],showRead:!1,limit:3,timeframe:1800}}},tFdb:function(t,e,n){"use strict";n.d(e,"a",(function(){return NotificationBell}));var a=n("ODXe"),i=n("yrBZ"),o=n("Apmp"),c=n("TSYQ"),l=n.n(c),r=n("q1tI"),s=n.n(r),u=n("QJz3"),d=n("ixXQ"),b={bell:"bell__AzBwO6vfXd1vBBNs_toEi",light:"light__2QkOxErjEG_gJjXx-P0vkr",unread:"unread__CEzUq-gsL9aPdjh-k_4RR"};const NotificationBell=({theme:t="dark",unreadCount:e,onClick:n})=>{const c=Object(r.useState)(),f=Object(a.a)(c,2),m=f[0],g=f[1],_=Object(u.a)(d.a.HEADER_AREA),p=_.data,O=_.actions,E=p.notifications;Object(r.useEffect)((()=>{g(window.document.querySelector('link[rel="shortcut icon"]'))}),[]),Object(r.useEffect)((()=>{m&&(m.href=`/favicon${e?"-unread":""}.ico`)}),[e,m]);const h=l()(b.bell,b[""+t]);return s.a.createElement("button",{className:h,onClick:()=>{n&&n(),0!==e&&O.notificationsMarkedRead(E.map((t=>t.id)))},type:"button","aria-label":e>0?`Toggle Notification Menu, ${e} notifications`:"Toggle Notification Menu"},s.a.createElement(o.a,{size:20}),0!==e&&s.a.createElement(i.a,{id:"notification-count",bg:"red-500",borderRadius:"3px",height:"18",position:"absolute",left:"16",textAlign:"center",top:"-8",width:"20"},s.a.createElement("p",{className:b.unread},e>99?99:e)))}}}]);
//# sourceMappingURL=125.6f877778014aa843d7d0.chunk.js.map