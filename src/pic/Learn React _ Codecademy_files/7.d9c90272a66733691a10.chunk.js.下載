(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{"1aMd":function(e,t,a){"use strict";a.d(t,"a",(function(){return RegistrationForm}));var r=a("wx14"),n=a("rePB"),o=a("ODXe"),i=a("Ff2n"),c=a("DzJC"),s=a.n(c),l=a("E+oP"),d=a.n(l),p=a("G8Hi"),u=a("FZcb"),m=a("kVzq"),b=a("TSYQ"),g=a.n(b),_=a("q1tI"),f=a.n(_),O=a("24Ii"),h=a.n(O),v=a("xk4V"),y=a.n(v),j=a("f8p9"),E=a("DAui"),S=a("tYyt"),w=a("z9go"),N=a("GL5z"),R=a("hFGM"),C=a("gtj7"),k=a("b0K7"),P=a("NWss"),D=a("6lXR"),I=a("Z0cm"),G=a.n(I),F=a("ev9x"),V=a("vOOB");function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const extractValidationErrors=e=>{var t;const a=null===(t=e.body)||void 0===t?void 0:t.errors;return a&&Object.values(a).filter((e=>e))?Object.entries(a).reduce(((e,[t,a])=>_objectSpread(_objectSpread({},e),{},{[t]:G()(a)?V[a[0]]:V[a]||a})),{}):null},redirectAfterLogin=({redirectTo:e,workerSupportApplicant:t})=>{Object(F.g)(e)?window.location.assign(Object(C.d)(e||Object(k.gb)())):window.location.assign(Object(C.d)((({workerSupportApplicant:e})=>e?k.bc:k.ob)({workerSupportApplicant:t})))};var x=a("DZdY"),B=a("uz3z"),A=a("5sab"),z=a("uQrA"),L=a("ANOs"),T={registrationContainer:"registrationContainer__1DWVArjxkRSHEqpISv3YfU",registrationContainerCompact:"registrationContainerCompact__3f5fD0mXckkhzC_gkXDQaJ",screenReaderOnly:"screenReaderOnly__2S7ruRxpd1VhnuyeMz0di2",submitButton:"submitButton__1syIjVGtZiGfg2aBWCcvkZ",visuallyDisabled:"visuallyDisabled__2u_A2g3lZCdCvnedehaKKN",submitButtonCompact:"submitButtonCompact__DTD3_nPUjcDW2juBilPyk",tos:"tos__2S7BNNliayxJrYfZEqHGOH",fieldset:"fieldset__2IcsxborktqVvm5FdfygAO",formCompact:"formCompact__Q6nQtda86q7aKdsfLQSvz",formGroupsCompact:"formGroupsCompact__1e0cWED9TSZNrITxnH3MoV",formGroupCompact:"formGroupCompact__225iYntNRtxkKn05IYqtJ1",inputCompact:"inputCompact__2Shf6uPLKjgQGwlRGM6u4D",validCheckmark:"validCheckmark__FINN8PBxaKyExgp8BuWaN",inputWrapper:"inputWrapper__1WcSn7pm4PiUUt2d3hgszk",hidden:"hidden__IE7yAQczIi7NG5Xaf2XMv",recaptchaError:"recaptchaError__2PRVQPBckCquoqnpNkolaI",formGroup:"formGroup__26lWN6IoN44keRivjjZbD7",padBottomIfNotEmpty:"padBottomIfNotEmpty__SRLk-qQ59lLzCQRc26yql","grecaptcha-badge":"grecaptcha-badge"};function RegistrationGridForm_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function RegistrationGridForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?RegistrationGridForm_ownKeys(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RegistrationGridForm_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const M=Object(x.a)(B.GridForm,{target:"epix2d0",label:"StyledGridform"})({name:"znht3n",styles:"padding-bottom:1rem"});var K;!function(e){e.CODING_REMINDERS_COMMS_TIMEZONE="coding_reminders_comms_timezone",e.EMAIL="email",e.PASSWORD="password"}(K||(K={}));const U="/register/validate",RegistrationGridForm=e=>{var t;let a=e.onSuccess,r=void 0===a?redirectAfterLogin:a,n=(e.isStudent,Object(i.a)(e,["onSuccess","isStudent"]));const c=Object(_.useState)(!1),l=Object(o.a)(c,2),d=l[0],p=l[1],u=Object(_.useState)(),m=Object(o.a)(u,2),b=m[0],O=m[1],v=Object(_.useState)(y()()),D=Object(o.a)(v,2),I=D[0],G=D[1],F=Object(_.useState)(),V=Object(o.a)(F,2),x=V[0],B=V[1],q=Object(_.useState)({}),W=Object(o.a)(q,2),Z=W[0],Q=W[1],H=Object(_.useRef)(null),Y=Object.values(Z).every((e=>e.isValidated)),onSuccessfulValidation=e=>{Q(RegistrationGridForm_objectSpread(RegistrationGridForm_objectSpread({},Z),{},{[e]:{isValidated:!0}}))},onFailedValidation=(e,t)=>{Q(RegistrationGridForm_objectSpread(RegistrationGridForm_objectSpread({},Z),{},{[e]:{isValidated:!1,error:t}}))},onSubmissionFailedValidation=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&onFailedValidation(t,e[t])},serialize=e=>{let t={};const a={};return Object.entries(e).forEach((([e,r])=>{(e=>Object.values(K).includes(e))(e)?a[e]=r:t=RegistrationGridForm_objectSpread(RegistrationGridForm_objectSpread({},t),{},{[e]:r})})),t.user=a,B(t),t},resetRecaptcha=()=>{p(!1),G(y()())},X=s()((e=>{if(!e)return void onFailedValidation("email","can't be blank");const t="email";h.a.post(U).send({user:{email:e}}).use(R.b).accept("json").then((()=>{onSuccessfulValidation(t)})).catch((e=>{const a=extractValidationErrors(e.response);(null==a?void 0:a.email)?onFailedValidation(t,a.email):onSuccessfulValidation(t)}))}),250),onUpdate=()=>{b||(O("pending"),setTimeout((()=>{O("complete")}),500))},onSubmitClick=()=>{Object(w.c)({target:"create_account"})},J=S.a.get("authenticity_token"),$=n.currentPage,ee=n.hideOauth,te=n.hideRecaptchaInfo,ae=n.locationType,re=n.redirectUrl,ne=n.compact,oe=n.classNames,ie=void 0===oe?{}:oe,ce="location/EXERCISE"===ae,se=re&&Object(C.d)(re),le=g()("recaptcha-wrapper",{[T.padBottomIfNotEmpty]:ne});return f.a.createElement("div",{className:g()(T.registrationContainer,ie.container,{[T.registrationContainerCompact]:ne})},f.a.createElement(M,{fields:[{name:K.EMAIL,label:P.emailLabel,type:"email",defaultValue:"",size:12,onUpdate:onUpdate,validation:{required:!0,validate:async e=>{var t;return await X(e)||(null===(t=Z.email)||void 0===t?void 0:t.error)}}},{name:K.PASSWORD,customError:null===(t=Z.password)||void 0===t?void 0:t.error,label:P.passwordLabel,type:"password",tooltip:{children:f.a.createElement(A.a,{text:L.a}),id:"password-tooltip"},size:12,onUpdate:onUpdate,defaultValue:"",validation:{validate:e=>(e=>{let t;return 0===e.length&&(t="can't be blank"),!t&&e.length<6&&(t="is not long enough"),t&&onFailedValidation("password",t),onSuccessfulValidation("password"),t})(e)}},{name:"referring_page",type:"hidden",defaultValue:$},{name:"redirect",type:"hidden",defaultValue:se},{name:"authenticity_token",type:"hidden",defaultValue:J},{name:K.CODING_REMINDERS_COMMS_TIMEZONE,type:"hidden",defaultValue:Intl.DateTimeFormat().resolvedOptions().timeZone},{name:"signing_up_from_exercise",type:"hidden",defaultValue:""+ce},{name:"sweet_container",label:"If you are a human, do not fill in this field.",type:"sweet-container"}],submit:{contents:"Sign Up",position:"stretch",size:12,disabled:d||"complete"!==b},validation:"all",onSubmit:e=>{if(onSubmitClick(),Y)return p(!0),h.a.post(U).send(serialize(e)).use(R.b).accept("json").then((()=>{null!==H.current?H.current.execute():N.a.error({message:"captcha on checkoutpage has a null ref"})})).catch((e=>{const t=extractValidationErrors(e.response);t&&onSubmissionFailedValidation(t),p(!1)}))}}),f.a.createElement("div",{className:le},(null==Z?void 0:Z.recaptcha)&&f.a.createElement("div",{className:T.recaptchaError,"data-testid":"recaptcha-error"},Z.recaptcha),f.a.createElement(E.a,{key:I,publicKey:S.a.get("recaptcha_key_v2"),size:"invisible",ref:H,onChange:e=>{p(!0),h.a.post(k.Hb).send(RegistrationGridForm_objectSpread(RegistrationGridForm_objectSpread({},x),{},{"g-recaptcha-response":e})).use(R.b).accept("json").then((({body:e})=>{Object(w.a)("user_sign_up"),p(!1),r(e)})).catch((e=>{const t=extractValidationErrors(e.response);p(!1),t&&onSubmissionFailedValidation(t),resetRecaptcha()}))},onExpired:()=>{resetRecaptcha()}})),!te&&f.a.createElement(z.a,{color:"gray-900",as:"small"},f.a.createElement("p",{dangerouslySetInnerHTML:{__html:P.recaptchaTOS}})),!ee&&f.a.createElement(j.a,{signUp:!0,urlParams:{redirect:se}}))};var q=a("yrBZ");const SweetContainerInput=()=>f.a.createElement(q.a,{height:"0",left:"100vw",overflow:"hidden",position:"absolute",top:"100vh",width:"0"},f.a.createElement("label",{htmlFor:"sweet_container"},"Check this input if you are an automated machine, and not a human"),f.a.createElement("input",{id:"sweet_container",name:"sweet_container",type:"checkbox"}));var W=a("oHca"),Z=a("05V4"),Q="validationText__2V8IomQ7py3ImJSkR74lUL",H="tooltipValidationError__1uEAgOW6IuqUqWblAq8-ak",Y="tooltipTarget__2QEgWo1UnUfrI64N8g5a7R",X="infoIcon__1g_zfaxGIRIbEh291YxmGv",J="tooltipContents__2bqd9NtbRxq1kYIR2tCLhZ";const $={password:L.a},ValidationError=e=>{if(!e.validationError)return null;const t=$[e.fieldName];return t?f.a.createElement("div",{className:H},f.a.createElement(W.a,{alignment:"bottom-right",focusable:!0,id:e.fieldName+"-tooltip",target:f.a.createElement("div",{className:Y},f.a.createElement("span",{"aria-live":"assertive",className:Q},e.validationError),f.a.createElement(Z.a,{size:12,className:X}))},f.a.createElement(A.a,{text:t,spacing:"tight",className:J}))):f.a.createElement("span",{"aria-live":"assertive",className:Q},e.validationError)};function RegistrationForm_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function RegistrationForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?RegistrationForm_ownKeys(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RegistrationForm_ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const ee=[{name:"email",label:P.emailLabel,type:"email",invalidMessage:"Please use a valid email address",pattern:void 0},{name:"password",label:P.passwordLabel,type:"password",invalidMessage:"is not long enough",pattern:".{6,128}"}],te="/register/validate",RegistrationForm=e=>{let t=e.onSuccess,a=void 0===t?redirectAfterLogin:t,n=e.submitButtonProps,c=void 0===n?{size:"large",theme:"brand-purple"}:n,l=e.isStudent,b=void 0!==l&&l,O=Object(i.a)(e,["onSuccess","submitButtonProps","isStudent"]);const v="sign_up_form_",I=Object(_.useState)(!1),G=Object(o.a)(I,2),F=G[0],V=G[1],x=Object(_.useState)(),B=Object(o.a)(x,2),A=B[0],z=B[1],L=Object(_.useState)(y()()),M=Object(o.a)(L,2),K=M[0],U=M[1],q=Object(_.useState)({}),W=Object(o.a)(q,2),Z=W[0],Q=W[1],H=Object(_.useRef)(null),Y=Object(_.useRef)(null),X=Object(_.useRef)("");if(Object(D.a)("grid_form_auth"))return f.a.createElement(RegistrationGridForm,{onSuccess:a,isStudent:b});const J=Object.values(Z).every((e=>e.isValidated)),getElementValue=e=>"checkbox"===e.type?e.checked:e.value,onSuccessfulValidation=e=>{Q(RegistrationForm_objectSpread(RegistrationForm_objectSpread({},Z),{},{[e]:{isValidated:!0}}))},onFailedValidation=(e,t)=>{Q(RegistrationForm_objectSpread(RegistrationForm_objectSpread({},Z),{},{[e]:{isValidated:!1,error:t}}))},onSubmissionFailedValidation=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&onFailedValidation(t,e[t])},serialize=()=>{if(H.current)return[...H.current.elements].filter((e=>e.name)).reduce(((e,t)=>{const a=t.dataset.resource;return RegistrationForm_objectSpread(RegistrationForm_objectSpread({},e),{},a?{[a]:RegistrationForm_objectSpread(RegistrationForm_objectSpread({},e[a]),{},{[t.name]:getElementValue(t)})}:{[t.name]:getElementValue(t)})}),{})},resetRecaptcha=()=>{V(!1),U(y()())},$=s()(((e,t)=>{t.target.value?h.a.post(te).send({user:{[e]:t.target.value}}).use(R.b).accept("json").then((()=>{onSuccessfulValidation(e)})).catch((t=>{const a=extractValidationErrors(t.response);(null==a?void 0:a[e])?onFailedValidation(e,a[e]):onSuccessfulValidation(e)})):onFailedValidation(e,"can't be blank")}),250),validateField=(e,t)=>{"password"===e?(X.current=t.target.value,((e,t)=>{const a=t.target.validity.valueMissing,r=t.target.validity.valid;let n;a?n="can't be blank":r||(n=ee.find((t=>t.name===e)).invalidMessage),n?onFailedValidation(e,n):onSuccessfulValidation(e)})(e,t)):$(e,t)},onFieldBlur=e=>{e.persist();const t=serialize().user||{},a=t.email,r=void 0===a?"":a,n=t.password,o=void 0===n?"":n;d()(r)&&d()(o)||"password"===e.target.name&&e.target.value===X.current||validateField(e.target.name,e)},onFieldChange=e=>{e.persist();const t=e.target.name;Z[t]&&validateField(t,e),A||(z("pending"),setTimeout((()=>{z("complete")}),500))},ae=S.a.get("authenticity_token"),re=O.currentPage,ne=O.defaultValues,oe=void 0===ne?{email:"",password:""}:ne,ie=O.hideOauth,ce=O.hideRecaptchaInfo,se=O.locationType,le=O.redirectUrl,de=O.compact,pe=O.classNames,ue=void 0===pe?{}:pe,me="location/EXERCISE"===se,be=le&&Object(C.d)(le),ge=g()("recaptcha-wrapper",{[T.padBottomIfNotEmpty]:de});return f.a.createElement("div",{className:g()(T.registrationContainer,ue.container,{[T.registrationContainerCompact]:de})},f.a.createElement("form",{onSubmit:e=>(e.preventDefault(),J?h.a.post(te).send(serialize()).use(R.b).accept("json").then((()=>{null!==Y.current?Y.current.execute():N.a.error({message:"captcha on checkoutpage has a null ref"})})).catch((e=>{const t=extractValidationErrors(e.response);t&&onSubmissionFailedValidation(t),V(!1)})):null),noValidate:!0,ref:H,method:"POST"},f.a.createElement("fieldset",{className:T.fieldset},f.a.createElement(SweetContainerInput,null),f.a.createElement("input",{name:"authenticity_token",type:"hidden",value:ae}),f.a.createElement("input",{name:"coding_reminders_comms_timezone","data-resource":"user",type:"hidden",value:Intl.DateTimeFormat().resolvedOptions().timeZone}),f.a.createElement("input",{name:"signing_up_from_exercise",type:"hidden",value:""+me}),b&&f.a.createElement("input",{name:"student_access",type:"hidden",value:1}),f.a.createElement("input",{name:"referring_page",type:"hidden",value:re}),f.a.createElement("input",{name:"redirect",type:"hidden",value:be}),f.a.createElement("div",{className:g()(T.formGroups,{[T.formGroupsCompact]:de},ue.formGroups)},ee.map((e=>{var t,a,r;return f.a.createElement(p.d,{key:`${v}${e.name}`,htmlFor:`${v}${e.name}`,label:e.label,className:g()(T.formGroup,{[T.formGroupCompact]:de})},f.a.createElement(ValidationError,{fieldName:e.name,validationError:null===(t=Z[e.name])||void 0===t?void 0:t.error}),f.a.createElement("div",{className:T.inputWrapper},f.a.createElement(p.g,{"aria-invalid":(null===(a=Z[e.name])||void 0===a?void 0:a.isValidated)?"false":"true",className:g()(T.input,{[T.inputCompact]:de},ue.input),"data-testid":e.name+"-field",htmlFor:`${v}${e.name}`,name:e.name,type:e.type,onBlur:onFieldBlur,onChange:onFieldChange,required:!0,error:Z[e.name]?!Z[e.name].isValidated:void 0,pattern:e.pattern,"data-resource":"user",defaultValue:oe[e.name]}),(null===(r=Z[e.name])||void 0===r?void 0:r.isValidated)&&f.a.createElement(m.a,{className:T.validCheckmark})))}))),f.a.createElement("div",{className:ge},(null==Z?void 0:Z.recaptcha)&&f.a.createElement("div",{className:T.recaptchaError,"data-testid":"recaptcha-error"},Z.recaptcha),f.a.createElement(E.a,{key:K,publicKey:S.a.get("recaptcha_key_v2"),size:"invisible",ref:Y,onChange:e=>{V(!0),h.a.post(k.Hb).send(RegistrationForm_objectSpread(RegistrationForm_objectSpread({},serialize()),{},{"g-recaptcha-response":e})).use(R.b).accept("json").then((({body:e})=>{Object(w.a)("user_sign_up"),V(!1),a(e)})).catch((e=>{const t=extractValidationErrors(e.response);V(!1),t&&onSubmissionFailedValidation(t),resetRecaptcha()}))},onExpired:()=>{resetRecaptcha()}})),f.a.createElement("div",{className:ue.footer},f.a.createElement(u.a,Object(r.a)({},c,{onClick:()=>{Object(w.c)({target:"create_account"})},type:"submit",className:g()(T.submitButton,{[T.submitButtonCompact]:de},ue.submitButton),disabled:F||"complete"!==A,id:v+"submit","data-testid":"registration-form-submit"}),"Sign Up"),!ce&&f.a.createElement("p",{className:g()(T.tos,ue.tos),dangerouslySetInnerHTML:{__html:P.recaptchaTOS}})))),!ie&&f.a.createElement(j.a,{signUp:!0,urlParams:{redirect:be}}))}},NWss:function(e){e.exports=JSON.parse('{"createAccountComplete":"Account created. You\'re almost there!","emailLabel":"Email","passwordLabel":"Password","recaptchaTOS":"By signing up for Codecademy, you agree to Codecademy\'s <a href=\\"/terms\\">Terms of Service</a> & <a href=\\"/policy\\">Privacy Policy</a>.","createAccountCTA":"Sign Up"}')},vOOB:function(e){e.exports=JSON.parse('{"weak":"too weak","breach":"We\'ve detected that the password you\'ve entered may not be secure. Please create a new one.","length":"is not long enough"}')}}]);
//# sourceMappingURL=7.d9c90272a66733691a10.chunk.js.map