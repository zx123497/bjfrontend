(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[588],{"8+UW":function(e,a,t){"use strict";t.d(a,"a",(function(){return LoginForm}));var r=t("uQrA"),s=t("/VKx"),n=t("uz3z"),o=t("TSYQ"),l=t.n(o),i=t("q1tI"),m=t.n(i),c=t("/MKj"),d=t("24Ii"),u=t.n(d),_=t("DAui"),p=t("tYyt"),g=t("hFGM"),b=t("b0K7"),E=t("2pFw"),h=t("itSE"),f=t("6lXR"),y=t("f8p9"),N=t("G8Hi"),v=t("FZcb"),w="fieldErrors__2zi5edknWnTb_epV2owZkQ";const FieldErrors=({errors:e})=>e&&e.length&&e.filter((e=>e)).length&&"[[]]"!==JSON.stringify(e)?m.a.createElement("ul",{className:w},e.filter((e=>e)).map((e=>m.a.createElement("li",{key:e},e)))):null;FieldErrors.defaultProps={errors:[]};var O=t("5pk2"),k="container__3UMuKHz-h-LEkp0hpjioD",L="containerDisabled__2j2gcMEgxnZYAxiH5DyOF7",j="loginForm__1ZLq7gTIRWaG9vzmZaoX5",A="formGroups__fbAxu8kXQMAW5x385_jwj",F="formGroup__uQy4bSHVpprJIvm2vWnG7",B="forgotContainer__8dBWWQVLL8efCK6nN6MBd",C="forgotPassword__7MREyTcbLkWk-Jmf94d4g",S="submitButton__1qOSI1Xv43tR9edqYcaaX2",U="submitButtonSmall__3ClBU9rUSIUs7uiRPq1Q3R",z="padBottomIfNotEmpty__1au5AfFaxeNaQiBLpKmk1d";const OldLoginForm=({classNames:e={},compact:a,disabledByEmail:t,onRecapChange:r,redirectUrl:n,hideOauth:o,submitButtonTheme:i="brand-purple",emailLabel:d="Email or username"})=>{const u=p.a.get("login_requires_captcha"),g=p.a.get("authenticity_token"),E=Object(c.useSelector)(h.a);return m.a.createElement("div",{"data-testid":"login-form-container",className:l()(k,{[L]:t},e.container)},m.a.createElement(s.a,{className:l()(j,e.loginForm),column:!0},m.a.createElement(N.b,{action:b.kb,autoComplete:"on",method:"POST",name:"loginForm",id:"loginForm"},m.a.createElement("input",{name:"authenticity_token",type:"hidden",value:g}),m.a.createElement("input",{name:"redirect",type:"hidden",value:n}),m.a.createElement("div",{className:l()(A,e.formGroups)},m.a.createElement(N.d,{className:l()(F,e.formGroup),htmlFor:"user_login",label:d},m.a.createElement(N.g,{className:e.input,disabled:!!t,htmlFor:"user_login",name:"user[login]",defaultValue:t})),m.a.createElement(N.d,{className:l()(F,e.formGroup),htmlFor:"login__user_password",label:"Password"},m.a.createElement(N.g,{className:e.input,disabled:!!t,htmlFor:"login__user_password",type:"password",name:"user[password]",defaultValue:t?"************":void 0}))),m.a.createElement("div",{className:z},u&&!t&&m.a.createElement(_.a,{onChange:r,publicKey:p.a.get("recaptcha_key_v2")})),m.a.createElement(FieldErrors,{errors:E.map((e=>e.message))}),!t&&m.a.createElement("div",{className:e.footer},m.a.createElement("div",{className:B},m.a.createElement("a",{className:l()(C,e.forgotPassword),href:Object(b.V)(),target:a?"_blank":void 0},"I forgot my password")),m.a.createElement(v.a,{className:l()(S,{[U]:a},e.submitButton),disabled:!!t,id:"user_submit",size:a?"small":"large",theme:i,type:"submit"},O.logIn)))),!o&&m.a.createElement(s.a,{column:!0,className:e.oAuthContainer},m.a.createElement(y.a,{urlParams:{redirectUrl:n}})))},D={type:"error",message:"Invalid email or password"},LoginForm=({classNames:e={},compact:a,disabledByEmail:t,onRecapChange:o,redirectUrl:i,hideOauth:d,emailLabel:N="Email or username"})=>{const v=!Object(f.a)("grid_form_auth"),w=p.a.get("login_requires_captcha"),O=p.a.get("authenticity_token"),A=Object(c.useSelector)(h.a),F=Object(c.useDispatch)(),onSuccessfulLogin=e=>{var a;const t=null===(a=e.body)||void 0===a?void 0:a.password_is_breached;window.location.assign((e=>e?b.qb:i||Object(b.gb)())(t))},onFailedLogin=()=>{F(Object(E.a)(D))},B=[{type:"hidden",name:"authenticity_token",defaultValue:O},{type:"text",name:"user[login]",size:12,label:N,id:"user_login"},{type:"password",name:"user[password]",size:12,label:"Password",id:"login__user_password"},{type:"custom",render:()=>{var e;return m.a.createElement(r.a,{textColor:"red"},null===(e=A.find((e=>e.message)))||void 0===e?void 0:e.message)},name:"errors",size:12},{type:"custom",render:()=>m.a.createElement("a",{className:l()(C,e.forgotPassword),href:Object(b.V)(),target:a?"_blank":void 0},"I forgot my password"),name:"reset_password",size:12}];return v?m.a.createElement(OldLoginForm,{classNames:e,compact:a,disabledByEmail:t,onRecapChange:o,redirectUrl:i,hideOauth:d,emailLabel:N}):m.a.createElement("div",{"data-testid":"login-form-container",className:l()(k,{[L]:t},e.container)},m.a.createElement(s.a,{className:l()(j,e.loginForm),column:!0},m.a.createElement(n.GridForm,{fields:B.filter((e=>!!A.length||"errors"!==e.name)),onSubmit:async e=>{F(Object(E.b)(D)),u.a.post(b.kb).send(e).use(g.b).set("Accept","application/json").then(onSuccessfulLogin,onFailedLogin)},submit:{contents:"Log in",size:6}})),w&&!t&&m.a.createElement(_.a,{onChange:o,publicKey:p.a.get("recaptcha_key_v2")}),!d&&m.a.createElement(s.a,{column:!0,className:e.oAuthContainer},m.a.createElement(y.a,{urlParams:{redirectUrl:i}})))}}}]);
//# sourceMappingURL=588.0d927f8078be6b14e3cf.chunk.js.map